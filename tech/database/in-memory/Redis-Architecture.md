# Redis architecture

## replication
```
마스터와 복제본을 따로 두는 방식

레디스의 복제가 되는 메커니즘은 비동기로 동작함.

마스터가 복제본에 데이터가 잘 전달되었는지 확인하지 않음.

HA 기능이 없어서 마스터에 장애가 발생하면 수동으로 변경해줘야 하는 작업들 많음.

복제본에 직접 접속해서 복제를 끊어야 하고 어플리케이션에서도 연결 설정을 변경해서 배포를 해줘야 함.
```

## sentinel
```
위 방식에서 센티넬 노드만 있는 방식. 이 노드는 일반 노드들을 모니터링 하는 노드이다.

마스터가 죽는 경우 자동으로 페일오버를 발생시켜 기존의 복제본이 마스터가 되게 함.

이때 어플리케이션에서는 연결 설정을 변경하지 않아도 됨.

어플리케이션에서는 센티넬의 정보를 알고 있으면 센티넬이 변경된 마스터 정보로 매핑함.

센티넬은 항상 3대 이상의 홀수로 동작해야 하고 과반수 이상이 동의해야 페일 오버가 진행됨.
```

## cluster
```
최소 3개의 마스터가 필요하며 샤딩 기능을 제공함.

모든 노드가 서로를 감시하다가 마스터가 비정상일 경우 자동으로 페일 오버를 진행함.

일반적으로 하나의 마스터에 하나의 복제본을 두는게 일반적이다.
```
