## Injection-Scopes
다른 프로그래밍 언어를 사용하는 개발자에게는 Nest에서 거의 모든 것이 수신 요청에 걸쳐 공유된다는 사실이 놀랍게 느껴질 수 있습니다.

여기에는 데이터베이스 연결 풀, 전역 상태를 가진 싱글톤 서비스 등과 같은 리소스가 포함됩니다.

Node.js는 각 요청이 별도의 스레드에서 처리되는 request/response Multi-Threaded Stateless Model을 사용하지 않는다는 점을 이해하는 것이 중요합니다.

따라서 Nest에서 싱글톤 인스턴스를 사용하는 것은 애플리케이션에 완전히 안전합니다.

하지만 컨트롤러에 요청 기반 수명을 설정해야 하는 특정 사례가 있을 수 있습니다.

예를 들어 GraphQL 애플리케이션의 요청별 캐싱, 요청 추적 또는 멀티테넌시 구현 등이 있습니다.

Injection-Scope는 원하는 Provider 수명 동작을 얻기 위한 메커니즘을 제공합니다.

### Provider Scope

| Scope     | Description                                                                                                                           |
|-----------|---------------------------------------------------------------------------------------------------------------------------------------|
| DEFAULT   | 단일 인스턴스가 전체 애플리케이션에서 공유됩니다.<br/>인스턴스 수명은 애플리케이션 수명 주기와 직접 연결됩니다.<br/>애플리케이션이 시작되면 모든 싱글톤 Provider는 인스턴스화됩니다.<br/>싱글톤 범위는 기본적으로 사용됩니다. |
| REQUEST   | 각 수신 요청에 대해 Provider의 새 인스턴스가 독점적으로 생성됩니다.<br/> 요청 처리가 완료된 후 인스턴스가 garbage-collected 됩니다.                                             |
| TRANSIENT | Transient Provider는 소비자 간에 공유되지 않습니다.<br/>Transient Provider를 삽입하는 각 소비자는 새로운 전용 인스턴스를 받게 됩니다.                                        |

대부분의 사용 사례에서는 싱글톤 범위를 사용하는 것이 좋습니다.

소비자 및 요청 간에 공급자를 공유하면 인스턴스가 캐시될 수 있고 애플리케이션 시작 시 한 번만 초기화가 이루어집니다.

