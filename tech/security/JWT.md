# JWT

JSON Web Token의 약자로, 사용자의 정보를 JSON 객체로 표현한 토큰이다.

토큰 기반 인증은 인증받은 사용자에게 토큰을 발급하고 요청 시 헤더에 포함해 검증한다.

서버 세션에 인증 정보를 저장하지 않아 stateless 구조가 되고 확장에 유리하다.

## 구조
```
1. header(정보 암호화할 해싱 알고리즘, 토큰 타입)
2. payload(토큰이 가진 정보, key-value 형식으로 이루어져있음)
3. signature(인코딩된 header와 payload를 더하고 비밀키로 해싱함, 토큰의 위변조 여부를 확인하는데 사용)
```

## 장점
```
1. header와 payload를 가지고 signature를 생성하여 데이터 위변조를 막을 수 있다.
2. 인증 정보에 대한 별도의 저장소가 필요없다. JWT는 토큰에 대한 기본정보와 전달할 정보 및 토큰이 검증됬음을 증명하는 서명 등 필요한 모든 정보를 자체적으로 가지고 있다.
```

## 단점
```
1. 토큰의 길이가 길어서 인증 요청이 많아지면 네트워크 부하가 심해진다.
2. payload 자체는 암호화되지 않아서 유저의 중요한 정보는 담을 수 없다.
3. 토큰은 한번 발급되면 유효기간이 만료될 때 계속 사용되어 탈취당하게 되면 대처하기 힘들다.
```

## 보안 전략
```
1. 토큰의 만료 기한을 짧게 설정하여 토큰이 탈취되어도 빠르게 만료되기 때문에 피해를 최소화 할 수 있다.
2. Refresh Token을 발급하여 Access Token이 만료되어도 Refresh Token을 검증하여 새로운 Access Token을 발급할 수 있다.
이렇게 하면 사용자가 자주 로그인할 필요도 없다.
하지만 서버는 Refresh Token을 별도로 저장하고 있어야 하므로 JWT의 장점을 완벽하게 누릴 수 없다는게 단점이다.
```
